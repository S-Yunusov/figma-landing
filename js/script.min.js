const navMenu=document.querySelector(".nav__menu"),navSocial=document.querySelector(".nav__social"),navBtn=document.querySelector(".nav__close-menu"),nav=document.querySelector(".nav"),header=document.querySelector(".header"),videoPlayer=document.querySelector(".player");navBtn.addEventListener("click",()=>{navBtn.classList.toggle("nav__close-menu_open"),navMenu.classList.toggle("nav__menu_open"),navSocial.classList.toggle("nav__social_open"),scrollY<header.clientHeight&&nav.classList.toggle("nav_fixed")}),window.addEventListener("scroll",()=>{scrollY>header.clientHeight&&nav.classList.add("nav_fixed"),scrollY<header.clientHeight&&!navBtn.classList.contains("nav__close-menu_open")&&nav.classList.remove("nav_fixed")});class Player{constructor(e){this.player=document.querySelector(e),this.video=this.player.querySelector(".player__video"),this.listeners(),this.timer,this.toggle=!0}listeners(){this.video.addEventListener("click",this.play.bind(this)),this.video.addEventListener("dblclick",this.full.bind(this)),this.video.addEventListener("loadedmetadata",this.setTime.bind(this)),this.video.addEventListener("timeupdate",this.timeUpdate.bind(this)),this.player.querySelector(".player__play").addEventListener("click",this.play.bind(this)),this.player.querySelector(".player__play-circle").addEventListener("click",this.play.bind(this)),this.player.querySelector(".player__full").addEventListener("click",this.full.bind(this)),this.player.querySelector(".player__sound-mute").addEventListener("click",this.mute.bind(this)),this.player.querySelector(".player__sound-volume").addEventListener("input",this.volume.bind(this)),this.player.querySelector(".player__speed").addEventListener("input",this.speed.bind(this)),this.player.querySelector(".player__line").addEventListener("click",this.setLine.bind(this)),this.player.querySelector(".player__line").addEventListener("mousemove",this.preview.bind(this)),this.player.querySelector(".player__line").addEventListener("mouseout",()=>{this.player.querySelector(".player__preview").style.display="none"}),this.player.addEventListener("mousemove",()=>{clearTimeout(this.timer),this.player.querySelector(".player__panel").classList.remove("player__panel_hide"),this.toggle=!0})}play(){this.switch=!this.switch,this.switch?this.video.play():this.video.pause(),this.player.querySelector(".player__play .fas").className=this.switch?"fas fa-pause":"fas fa-play",this.video.style="z-index: 0",this.player.querySelector(".player__play-circle").style.display=this.switch?"none":"block"}full(){this.isFull=!document.fullscreenElement,this.isFull?this.player.requestFullscreen():document.exitFullscreen(),this.player.querySelector(".player__full .fas").className=this.isFull?"fas fa-compress":"fas fa-expand"}mute(){this.isMuted=!this.isMuted,this.video.muted=this.isMuted,this.player.querySelector(".player__sound-mute .fas").className=this.isMuted?"fas fa-volume-mute":"fas fa-volume-up";const e=this.player.querySelector(".player__sound-volume");this.isMuted?(e.setAttribute("volume",e.value),e.value=0):e.value=e.getAttribute("volume")}volume(){const e=this.player.querySelector(".player__sound-volume");this.video.volume=e.value/100,this.video.muted=!1,this.player.querySelector(".player__sound-mute .fas").className=e.value<=0?"fas fa-volume-off":"fas fa-volume-up"}speed(){this.video.playbackRate=this.player.querySelector(".player__speed").value}setTime(){const e=Math.floor(this.video.duration);let t=Math.floor(e/60),l=Math.floor(e%60);t=t<10?`0${t}`:t,l=l<10?`0${l}`:l,this.player.querySelector(".player__time-duration").innerHTML=`${t}:${l}`}timeUpdate(){const e=Math.floor(this.video.currentTime),t=Math.floor(this.video.duration);let l=Math.floor(e/60),i=Math.floor(e%60);l=l<10?`0${l}`:l,i=i<10?`0${i}`:i,this.player.querySelector(".player__time-current").innerHTML=`${l}:${i}`,this.player.querySelector(".player__line-current").style.width=`${e/t*100}%`,this.toggle&&(this.toggle=!1,this.timer=setTimeout(()=>{this.player.querySelector(".player__panel").classList.add("player__panel_hide")},3e3))}setLine(e){const t=Math.floor(this.video.duration),l=this.player.querySelector(".player__line").clientWidth;this.player.querySelector(".player__line-current").style.width=`${e.offsetX/l*100}%`,this.video.currentTime=`${e.offsetX/l*t}`}preview(e){const t=Math.floor(this.video.duration),l=this.player.querySelector(".player__line").clientWidth;let i=e.offsetX;i<75&&(i=75),i>l-75&&(i=l-75),this.player.querySelector(".player__preview").style=`display: block; left: ${i}px`,this.player.querySelector(".player__preview-video").currentTime=`${e.offsetX/l*t}`;const s=this.player.querySelector(".player__preview-video").currentTime;let r=Math.floor(s/60),a=Math.floor(s%60);r=r<10?`0${r}`:r,a=a<10?`0${a}`:a,this.player.querySelector(".player__preview-time").innerHTML=`${r}:${a}`}}const player=new Player(".player");console.log(player);